
<!DOCTYPE html>
<html>
<head>
	<meta name="description" content="CRP 458 Mini Project">
	<meta charset="utf-8">
<!--
Created using JS Bin
http://jsbin.com

Copyright (c) 2018 by lcdickey (http://jsbin.com/loqefev/9/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
	<meta name="viewport" content="width=device-width">
	<title>Final Project</title>
	
		
  
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" /> <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
 <script src="https://cdn.jsdelivr.net/leaflet.esri/1.0.3/esri-leaflet.js"></script>

<script src="https://code.jquery.com/jquery-2.2.4.js"></script>	  
	<script src="https://indicator.extension.iastate.edu/classes/leaflet-ajax-gh-pages/dist/leaflet.ajax.min.js"></script>
  	  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    
<link rel="stylesheet" href="https://abebrese.github.io/LA558/Markers/Leaflet.awesome-markers/leaflet.awesome-markers.css">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"/>

    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
 <script src="https://abebrese.github.io/LA558/Markers/Leaflet.awesome-markers/leaflet.awesome-markers.min.js"></script>
  

<style id="jsbin-css">
#container{
  margin:0 auto;
  width: 1600px;
  height: 800px;
  background-color:#3f73a6;
  font-family: "Calibri", sans-serif;
  
}

#header {
  height:55px;
  width: 1000px;
  margin-bottom: 12px
  
}

h1 {
  font-family: "Candara", sans-serif;
  font-size: 35px;
  background-color:#3f73a6;
  color: white ;
  -webkit-text-stroke: .75px black;
  text-align: left;
  padding-left: 10px;
  vertical-align: middle
}

#main {
  width: 8000px;
   margin-bottom: 7px;
  height: 750px
}

#leftPane {
  width: 250px;
  border: 8px;
  border-color:#3f73a6;
  background-color:#cccccc; 
  padding-left: 6px;
  float: left; 
  height: 700px;
}

.subtitle{
  font-weight: bold;
  text-align: left;
  font-size: 65px,
  padding-left: 5px;
}

#options{
 height: 30%;
 width:90%;
 padding: 4px;
 vertical-align: middle;
}

form{
  margin: 10px
}




#rightPane {
  width: 750px;
  background-color: #3f73a6;
  float: left;
  height: 400px; 
  margin-bottom: 0px
}

#map {
  width:800px; height: 700px;
}





#footer{
  font-size: 11px;
  width: 1000px;
  height: 100px;
  background: white
}
</style>
</head>
     
   <div id= container> 
 <div id=header> 
    <h1> FRAZIER AVENUE DETENTION BASIN PROJECT
    </h1>
 </div>
 
 <div id=main> 
  <div id=leftPane> 
    <div id=options> 
      <div class=subtitle>What is a detention basin?<br>
      </div>
      Basically a hole in the ground that holds water from storm events. When areas are urbanized more storm runoff water is produced because rain water can't infiltrate concrete and other impervious surfaces. To prevent high flow rates, which can cause flooding, stream erosion, and carry large amounts of phosphorus, the water is <b>detained</b> in the basin and released slowly over a 24 hour period.
      
      
      <br><br>   
<div class=subtitle>How much water is generated by a storm event in this drainage area?<br><br>
      </div>
      <u>1 Year Event:</u><br>
      805,742 gallons<br><br>
      <u>25 Year Event:</u><br>
      2,155,766 gallons<br><br>
    <u>100 Year Event:</u><br>
      3,005,777 gallons<br><br>  
      
<div class=subtitle>What is a the status of this project?<br>
      </div>
      Our group has designed a new basin and outlet control structure. Once we confirm ground elevations a construction plan will be produced. Hopefully construction can begin by the late summer!
     
      
      <br>
   </div>
    
    
  </div>
  
  <div id=rightPane>
    <div id=map>
      </div>
    
  </div>
 </div>

  <div id=footer>
   <i>  The phosphorus index data was produced by John DeGroote and edited by Loulou Dickey. All other data was created by Loulou Dickey.</i>
      </div>
  </div>
	</div>
<script>
console.clear();

//basemaps
var OSM =
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
  attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',
  maxZoom: 18
});


var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
});

var map = L.map('map', {
  center: new L.LatLng(41.5369,-93.64325),
  zoom: 14.5,
  layers: [Esri_WorldImagery]
});

//P index data and layer style

url1="https://lcdickey.github.io/CRP-458/Data/SLU.zip.geojson"



var jsonLayer = new L.GeoJSON.AJAX(url1, {
	style: style,
	onEachFeature: function (feature, layer) {
      htmlText = "<strong>" + feature.properties.File_Name+ "</strong><br> Area: <b>"  + feature.properties.Catchment_ + " acres" +  "</b><br> Biological Condition: <b>"  + feature.properties.Biological + "</b>" + "</b><br>Particulate Yield: <b>" + feature.properties.NC_Particu + " lbs/yr" + "</b><br> Phosphorous Yield: <b>"  + feature.properties.Total_Phos + " lbs/yr"+ "</b>";
        layer.bindPopup(htmlText);
		layer.bindTooltip(feature.properties.NAME);
    }
});


function getColor(d) {
  return d <= '5' ? '#feedde' :
    d <= '10' ? "#fdbe85" :
    d <= '25' ? "#fd8d3c" :
    d <= '50' ? "#e6550d" :
   
    "#a63603";
}


function style(feature) {
    return {
        fillColor: getColor(feature.properties.Total_Phos),
        weight: 1,
        opacity: 0.75,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.6
    };
}



//Basin parcel

var mybasin= L.geoJSON({
  "type": "FeatureCollection",

  "features": [
    {
      "type": "Feature",
      "properties": {},
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              -93.64409208297728,
              41.53672356950201
            ],
            [
              -93.64359855651855,
              41.53672356950201
            ],
            [
              -93.64359855651855,
              41.53736603550382
            ],
            [
              -93.64409208297728,
              41.53736603550382
            ],
            [
              -93.64409208297728,
              41.53672356950201
            ]
          ]
        ]
      }
    }
  ]

});

//Drainage area layer 
var url2="https://lcdickey.github.io/CRP-458/Data/basinshed.zip.geojson"


//Add drainage area and sewer network
var basinshed = new L.GeoJSON.AJAX(url2, {
	color:"red",
	
}).bindPopup("57% Impervious Area");

var url3="https://lcdickey.github.io/CRP-458/Data/basinsewer.zip.geojson"
var basinnetwork = new L.GeoJSON.AJAX(url3, {
	color:"red",
	
});







//layer controls
	var baseLayers = {
		"Open Street Map": OSM,
    "Aerial": Esri_WorldImagery
   	};

var overlays = {
"Detention Basin Location": mybasin,
  "Basin Sewer Network": basinnetwork,
  "Basin Drainage Area": basinshed,
  "Phosphorus/Sediment Contribution by Sub-Catchment": jsonLayer
 
	};






L.control.layers(baseLayers, overlays).addTo(map);
	
</script>

</body>
</html>
